<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Ivan Williams" />


<title>Pensions valuation with lifecontingencies package</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Pensions valuation with lifecontingencies package</h1>
<h4 class="author">Ivan Williams</h4>
<h4 class="date">20 marzo, 2021</h4>



<div id="function-pensfund" class="section level1">
<h1>Function <em>PensFund</em></h1>
<p>In this brief document we present a general function to valuate actuarial liabilities and normal costs, allowing different methods in pension funding for defined benefit schemes.</p>
<p>Each method is defined by the way that contributions are accrued in the active age before the specific risk apply. Following <span class="citation">(Winklevoss 1993)</span> and <span class="citation">(Bowers et al. 1997)</span>, the Normal Cost and Actuarial Liability can be seen as portions of <span class="math inline">\(PVFNC^{r}_x\)</span>, the present value of future benefit at age <span class="math inline">\(x\)</span> for the risk in <span class="math inline">\(r\)</span>, and that’s the way that we treat this in the function’s code. The methods that are implemented here are the “Benefit Prorate Method, Constant Dollar,” “Benefit Prorate Method, Constant Percent,” “Cost Prorate Method, Constant Dollar” and “Cost Prorate Method, Constant Benefit” (the last two also called “entry age methods”). For formula details the reader can go to chapters 5 and 6 on <span class="citation">(Winklevoss 1993)</span>.</p>
<p>We define a general function that allows to perform the calculations in a multi-decrement environment, with flexibility to consider different kind of benefit scheme, using functions of the “lifecontingencies” package (Spedicato et. al., 2018). The arguments (following general notation in Gian Paolo Clemente’s vignette titled “Pension Funding with lifecontingencies”) are:</p>
<ul>
<li><span class="math inline">\(x\)</span>: the age of the insured at the time of valuation</li>
<li><span class="math inline">\(y\)</span>: the age which the person entered to the job. This age is usually different than the age that the plan began</li>
<li><span class="math inline">\(r\)</span>: age where the risk is evaluated</li>
<li><span class="math inline">\(acttableAccPeriod\)</span>: multi-decrement object lifetable, where one of its decrements is the risk of interest. One of the most common applications is for and obligated retirement at age <span class="math inline">\(r\)</span>, and even in this case is needed a multi-decrement table with risks of death and retirement (with certainty for age <span class="math inline">\(r\)</span>)</li>
<li><span class="math inline">\(decrement\)</span>: decrement to evaluate</li>
<li><span class="math inline">\(i\)</span>: interest rate (real)</li>
<li><span class="math inline">\(j\)</span>: salary rate increment (real, productivity and seniority included)</li>
<li><span class="math inline">\(delta\)</span>: benefit rate increment (real)</li>
<li><span class="math inline">\(n\)</span>: years that the benefit will be payed (can be 1 for single payments). If it is omitted, will take value <span class="math inline">\(\omega-r\)</span></li>
<li><span class="math inline">\(avg\)</span>: number of past salaries to be considered for average</li>
<li><span class="math inline">\(acttablePaymPeriod\)</span>: lifetable object for payment period</li>
<li><span class="math inline">\(CostMet\)</span>: Method Cost, that could be “BPM_CD” (Benefit Prorate Method, Constant Dollar), “BPM_CP” (Benefit Prorate Method, Constant Percent), “CPM_CD” (Cost Prorate Method, Constant Dollar), “CPM_CB” (Cost Prorate Method, Constant Benefit).</li>
</ul>
<p>The general function is:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">&quot;lifecontingencies&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>PensFund <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, r, acttableAccPeriod, decrement, i, j, delta, n, avg, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    acttablePaymPeriod, CostMet) {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(n)) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        n <span class="ot">&lt;-</span> <span class="fu">getOmega</span>(acttableAccPeriod) <span class="sc">-</span> x <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="sc">&lt;</span> y) </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Entry age greater than actual age&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(decrement)) </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Which is the contingency of benefit?&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">class</span>(acttableAccPeriod) <span class="sc">!=</span> <span class="st">&quot;mdt&quot;</span>) </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Needed Mdt&quot;</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span>(decrement <span class="sc">%in%</span> <span class="fu">getDecrements</span>(acttableAccPeriod))) </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Not recognized decrement type&quot;</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(acttableAccPeriod)) </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Need a lifetable or actuarialtable&quot;</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(x) <span class="sc">|</span> <span class="fu">missing</span>(y)) </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Need age and seniority!&quot;</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="fu">getOmega</span>(acttableAccPeriod)) {</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        out <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(out)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(CostMet)) </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        CostMet <span class="ot">=</span> <span class="st">&quot;BPM_CD&quot;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(avg)) </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Need avg period of computing benefit&quot;</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(j)) </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Need average salary increase rate&quot;</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>, y <span class="sc">&lt;</span> <span class="dv">0</span>, avg <span class="sc">&lt;</span> <span class="dv">0</span>, delta <span class="sc">&lt;</span> <span class="dv">0</span>)) </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">&quot;Error! Negative parameters&quot;</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="do">########## survive all casuses</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    acttableAccPeriodTotal <span class="ot">=</span> <span class="fu">pxt</span>(acttableAccPeriod, <span class="at">x =</span> <span class="dv">0</span><span class="sc">:</span>(<span class="fu">getOmega</span>(acttableAccPeriod)), </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">t =</span> <span class="dv">1</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    acttableAccPeriodTotal <span class="ot">=</span> <span class="fu">probs2lifetable</span>(acttableAccPeriodTotal, <span class="at">type =</span> <span class="st">&quot;px&quot;</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">missing</span>(acttablePaymPeriod)) </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        acttablePaymPeriod <span class="ot">=</span> acttableAccPeriodTotal</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="do">########## Set benefit fix age valuation</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    x0 <span class="ot">=</span> x</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    B <span class="ot">=</span> <span class="fu">ifelse</span>(avg <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, (<span class="dv">1</span> <span class="sc">+</span> j)<span class="sc">^</span>(r <span class="sc">-</span> x0) <span class="sc">*</span> <span class="fu">annuity</span>(j, avg, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">type =</span> <span class="st">&quot;immediate&quot;</span>)<span class="sc">/</span>avg)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    q.r <span class="ot">=</span> <span class="fu">qxt</span>(<span class="at">object =</span> acttableAccPeriod, <span class="at">x =</span> r, <span class="at">t =</span> <span class="dv">1</span>, <span class="at">decrement =</span> decrement)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    Br <span class="ot">=</span> q.r <span class="sc">*</span> <span class="fu">axn</span>(acttablePaymPeriod, r, <span class="at">i =</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> delta) <span class="sc">-</span> <span class="dv">1</span>, <span class="at">n =</span> n, <span class="at">k =</span> <span class="dv">1</span>) <span class="sc">*</span> </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        B</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="do">########## Actuarial liability in age x, fot the age r (r&gt;=x)</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    ALyNC.x.r <span class="ot">=</span> <span class="cf">function</span>(x, r) {</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="do">## PVFB</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>        PVFB.x <span class="ot">=</span> <span class="fu">Exn</span>(acttableAccPeriodTotal, x, r <span class="sc">-</span> x, <span class="at">i =</span> i) <span class="sc">*</span> Br</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Normal Costs and liabilities under Actuarial Cost Methods</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (CostMet <span class="sc">==</span> <span class="st">&quot;BPM_CD&quot;</span>) {</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>            K <span class="ot">&lt;-</span> (x <span class="sc">-</span> y)<span class="sc">/</span>(r <span class="sc">-</span> y)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>            k <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(r <span class="sc">-</span> y)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (CostMet <span class="sc">==</span> <span class="st">&quot;BPM_CP&quot;</span>) {</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>            K <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> j)<span class="sc">^</span>(x <span class="sc">-</span> x0) <span class="sc">*</span> <span class="fu">annuity</span>(j, x <span class="sc">-</span> y <span class="sc">+</span> <span class="dv">1</span>, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">type =</span> <span class="st">&quot;immediate&quot;</span>)<span class="sc">/</span>((<span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>                j)<span class="sc">^</span>(r <span class="sc">-</span> x0) <span class="sc">*</span> <span class="fu">annuity</span>(j, r <span class="sc">-</span> y <span class="sc">+</span> <span class="dv">1</span>, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">type =</span> <span class="st">&quot;immediate&quot;</span>))</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>            k <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> j)<span class="sc">^</span>(x <span class="sc">-</span> x0)<span class="sc">/</span>(<span class="fu">annuity</span>(j, r <span class="sc">-</span> y, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">k =</span> <span class="dv">1</span>, <span class="at">type =</span> <span class="st">&quot;immediate&quot;</span>) <span class="sc">*</span> </span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>                (<span class="dv">1</span> <span class="sc">+</span> j)<span class="sc">^</span>(r <span class="sc">-</span> x0))</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (CostMet <span class="sc">==</span> <span class="st">&quot;CPM_CD&quot;</span>) {</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>            K <span class="ot">&lt;-</span> <span class="fu">axn</span>(acttableAccPeriodTotal, y, <span class="at">i =</span> i, <span class="at">n =</span> x <span class="sc">-</span> y, <span class="at">k =</span> <span class="dv">1</span>)<span class="sc">/</span><span class="fu">axn</span>(acttableAccPeriodTotal, </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>                y, <span class="at">i =</span> i, <span class="at">n =</span> r <span class="sc">-</span> y, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>            k <span class="ot">&lt;-</span> <span class="fu">Exn</span>(acttableAccPeriodTotal, y, x <span class="sc">-</span> y, <span class="at">i =</span> i)<span class="sc">/</span><span class="fu">axn</span>(acttableAccPeriodTotal, </span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>                y, <span class="at">i =</span> i, <span class="at">n =</span> r <span class="sc">-</span> y, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (CostMet <span class="sc">==</span> <span class="st">&quot;CPM_CB&quot;</span>) {</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>            K <span class="ot">&lt;-</span> <span class="fu">axn</span>(acttableAccPeriodTotal, y, <span class="at">i =</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> j) <span class="sc">-</span> <span class="dv">1</span>, <span class="at">n =</span> x <span class="sc">-</span> </span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>                y, <span class="at">k =</span> <span class="dv">1</span>)<span class="sc">/</span><span class="fu">axn</span>(acttableAccPeriodTotal, y, <span class="at">i =</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> j) <span class="sc">-</span> <span class="dv">1</span>, </span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> r <span class="sc">-</span> y, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>            k <span class="ot">&lt;-</span> <span class="fu">Exn</span>(acttableAccPeriodTotal, y, x <span class="sc">-</span> y, <span class="at">i =</span> i) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> j)<span class="sc">^</span>(x <span class="sc">-</span> y)<span class="sc">/</span><span class="fu">axn</span>(acttableAccPeriodTotal, </span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>                y, <span class="at">i =</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> j) <span class="sc">-</span> <span class="dv">1</span>, <span class="at">n =</span> r <span class="sc">-</span> y, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Results</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>        outAL.x.r <span class="ot">&lt;-</span> PVFB.x <span class="sc">*</span> K</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>        outNC.x.r <span class="ot">&lt;-</span> PVFB.x <span class="sc">*</span> k</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>        outPVFB.x <span class="ot">&lt;-</span> PVFB.x</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>        out.x.r <span class="ot">&lt;-</span> <span class="fu">c</span>(outAL.x.r, outNC.x.r, outPVFB.x)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(out.x.r)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="do">######## AL y NC for the rest of ages</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    ages_risk <span class="ot">=</span> x<span class="sc">:</span>r</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    outAL.x <span class="ot">=</span> <span class="fu">sapply</span>(ages_risk, <span class="cf">function</span>(x) <span class="fu">ALyNC.x.r</span>(x, r)[<span class="dv">1</span>])</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    outNC.x <span class="ot">=</span> <span class="fu">sapply</span>(ages_risk, <span class="cf">function</span>(x) <span class="fu">ALyNC.x.r</span>(x, r)[<span class="dv">2</span>])</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    outPVFB.x <span class="ot">=</span> <span class="fu">sapply</span>(ages_risk, <span class="cf">function</span>(x) <span class="fu">ALyNC.x.r</span>(x, r)[<span class="dv">3</span>])</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    outNC.x[<span class="fu">length</span>(ages_risk)] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    out.x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> ages_risk, <span class="at">AL =</span> outAL.x, <span class="at">NC =</span> outNC.x, <span class="at">PVFB =</span> outPVFB.x)</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(out.x)</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="first-main-example" class="section level2">
<h2>First (main) example</h2>
<p>A first example of application is of a person aged 30 (entered to job at age 20), with a benefit in case of disability, that is the average of the last 5 salaries before get disabled. For calculate that we’ll use the multi-decrement table ‘SoAISTdata’ for the accrued period and ‘soa08’ for the payment period, both available in “lifecontingencies” package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(SoAISTdata)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(soa08)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>MultiDecrTable <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">&quot;mdt&quot;</span>, <span class="at">name =</span> <span class="st">&quot;testMDT&quot;</span>, <span class="at">table =</span> SoAISTdata)</span></code></pre></div>
<pre><code>## Added fictional decrement below last x and completed x and lx until zero....</code></pre>
<p>The specific name of this risk in the table is ‘inability.’</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getDecrements</span>(MultiDecrTable)</span></code></pre></div>
<pre><code>## [1] &quot;death&quot;      &quot;withdrawal&quot; &quot;inability&quot;  &quot;retirement&quot;</code></pre>
<p>Now we calculate the liability and normal cost with the four methods, and <span class="math inline">\(i = .04\)</span>, <span class="math inline">\(j = .06\)</span>, <span class="math inline">\(delta = .03\)</span>, <span class="math inline">\(avg = 5\)</span>. In this case for the age risk 53 (<span class="math inline">\(r = 53\)</span>).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>x1<span class="ot">=</span><span class="dv">30</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>y1<span class="ot">=</span><span class="dv">20</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>r1<span class="ot">=</span><span class="dv">53</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>decrement1 <span class="ot">=</span> <span class="st">&quot;inability&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>BPM_CD <span class="ot">=</span> <span class="fu">PensFund</span>(x1, y1, r1, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement1,  </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">i =</span> .<span class="dv">04</span>, <span class="at">j =</span> .<span class="dv">06</span>, <span class="at">delta =</span> .<span class="dv">03</span>, <span class="at">avg =</span> <span class="dv">5</span>, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> <span class="st">&#39;BPM_CD&#39;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>BPM_CP <span class="ot">=</span> <span class="fu">PensFund</span>(x1, y1, r1, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement1,  </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">i =</span> .<span class="dv">04</span>, <span class="at">j =</span> .<span class="dv">06</span>, <span class="at">delta =</span> .<span class="dv">03</span>, <span class="at">avg =</span> <span class="dv">5</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> <span class="st">&#39;BPM_CP&#39;</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>CPM_CD <span class="ot">=</span> <span class="fu">PensFund</span>(x1, y1, r1, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement1,  </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">i =</span> .<span class="dv">04</span>, <span class="at">j =</span> .<span class="dv">06</span>, <span class="at">delta =</span> .<span class="dv">03</span>, <span class="at">avg =</span> <span class="dv">5</span>, </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> <span class="st">&#39;CPM_CD&#39;</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>CPM_CP <span class="ot">=</span> <span class="fu">PensFund</span>(x1, y1, r1, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement1,  </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">i =</span> .<span class="dv">04</span>, <span class="at">j =</span> .<span class="dv">06</span>, <span class="at">delta =</span> .<span class="dv">03</span>, <span class="at">avg =</span> <span class="dv">5</span>, </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> <span class="st">&#39;CPM_CB&#39;</span>)</span></code></pre></div>
<p>The way that each method amortize the benefit cost in active years can be seen in the next graph, showing the liability accumulated relationship between at any age: “CPM_CD” <span class="math inline">\(\geqslant\)</span> “CPM_CB”<span class="math inline">\(\geqslant\)</span> “BPM_CD” <span class="math inline">\(\geqslant\)</span> “BPM_CP.”</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFQCAMAAABgejECAAAA6lBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZpAAZrYil+Y6AAA6ADo6OgA6Ojo6OmY6OpA6ZpA6ZrY6kLY6kNth0E9mAABmADpmAGZmOgBmOjpmOmZmOpBmZjpmZmZmkJBmkLZmkNtmtpBmtttmtv+QOgCQOjqQOmaQZgCQZjqQZmaQZpCQkDqQkGaQkJCQtmaQttuQ29uQ2/+2ZgC2Zjq2Zma2kDq2kGa2tma2ttu225C227a22/+2/9u2///bkDrbkGbbtmbbtpDb25Db2//b/7bb/9vb///fU2v/tmb/tpD/25D/27b//7b//9v///8oDNxYAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAao0lEQVR4nO2dC2PktnHHqasVUbbrOFql6SO1cycnTtomvXWTNr3cOk5s7UYn4ft/neBJAlyABDgAMeTO7+LosVhgOPpzMBiQ3IYRBICmtgHEuiEBESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESBIQAQIEhABggREgCABESCyCOjloblxfv7mTajp8/2r98PvxVf79y8P+nvzgnzR0+nzfSO4ehtlpT2E4XR742taEm70G+sYpxqbZh/+mR/ol742tmOW90gWAT3dNo4l+yYoIBtbQPbvHed2L3o6hbrr5ZumqSEgcTokCoi7WOCz1nbM8h7JIqBD83N5EC9fN81H73g84lZIDz3fXz+yp5/x377lLrv6+e2r/xc269+cRaCu5avf3jY/frQj0J9Epz8SfZ6aOzOu7F7wdCsacRt0D6fmR183H73/9vbqje7to/dquJc/3DZXr7W3HppPqwiIH4ES0LfcmC8etWv+YBk9dBE39SeP3M9CGfpN7G+f9N6u55EcAuIG/VEEPnksjfpb9wJSJ8X1o3z1+nupB/WboYCclqaBLaCbA/fIvj+9Onfxs/DuwI/c9HCSHfyDsOa90xtvKFASfPn17051BHT1Vrpnr6OKcs2fLaOHLnq6FUf68vVr1r1JN/nBL6DFPJJDQE+3Si5c9e9eREAV//URSLS4l2bf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" style="display: block; margin: auto;" /></p>
<p>We can check the results with actuarial equivalences, specifically the formulas <span class="math inline">\(AL^{r}_x = PVFB^{r}_x-PVFNC^{r}_x\)</span> (6.3a) and <span class="math inline">\(AL^{r}_x = AVPNC^{r}_x\)</span> (6.4a) in <span class="citation">(Winklevoss 1993)</span>, which means that the actuarial liability at any time can be expressed as the difference between the present value of future benefit and the present value of future normal costs, and as the actuarial value of past normal costs (retrospective view).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># AL = PVBF - PVFNC first get survivial for all causes</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>acttableAccPeriodTotal <span class="ot">=</span> <span class="fu">pxt</span>(MultiDecrTable, <span class="at">x =</span> <span class="dv">0</span><span class="sc">:</span>(<span class="fu">getOmega</span>(MultiDecrTable)), <span class="at">t =</span> <span class="dv">1</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>acttableAccPeriodTotal <span class="ot">=</span> <span class="fu">probs2lifetable</span>(acttableAccPeriodTotal, <span class="at">type =</span> <span class="st">&quot;px&quot;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># are equal?</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(BPM_CD<span class="sc">$</span>AL[<span class="dv">1</span>], <span class="dv">10</span>) <span class="sc">==</span> <span class="fu">round</span>(BPM_CD<span class="sc">$</span>PVFB[<span class="dv">1</span>] <span class="sc">-</span> <span class="fu">sum</span>(<span class="fu">sapply</span>(x1<span class="sc">:</span>(r1 <span class="sc">-</span> <span class="dv">1</span>), <span class="cf">function</span>(x) <span class="fu">Exn</span>(acttableAccPeriodTotal, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    x1, x <span class="sc">-</span> x1, <span class="at">i =</span> <span class="fl">0.04</span>) <span class="sc">*</span> BPM_CD<span class="sc">$</span>NC[x <span class="sc">-</span> x1 <span class="sc">+</span> <span class="dv">1</span>])), <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Restrospective AL First get the liability at entry age y</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>BPM_CD_y <span class="ot">=</span> <span class="fu">PensFund</span>(y1, y1, r1, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement1, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">i =</span> <span class="fl">0.04</span>, <span class="at">j =</span> <span class="fl">0.06</span>, <span class="at">delta =</span> <span class="fl">0.03</span>, <span class="at">avg =</span> <span class="dv">5</span>, <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> <span class="st">&quot;BPM_CD&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># are equal?</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(BPM_CD_y<span class="sc">$</span>AL[BPM_CD_y<span class="sc">$</span>x <span class="sc">==</span> <span class="dv">45</span>], <span class="dv">10</span>) <span class="sc">==</span> <span class="fu">round</span>(<span class="fu">sum</span>(<span class="fu">sapply</span>(y1<span class="sc">:</span><span class="dv">44</span>, <span class="cf">function</span>(y) (<span class="fl">1.04</span>)<span class="sc">^</span>(<span class="dv">45</span> <span class="sc">-</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    y)<span class="sc">/</span><span class="fu">pxt</span>(acttableAccPeriodTotal, y, <span class="dv">45</span> <span class="sc">-</span> y) <span class="sc">*</span> BPM_CD_y<span class="sc">$</span>NC[BPM_CD_y<span class="sc">$</span>x <span class="sc">==</span> y])), <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="second-example" class="section level2">
<h2>Second example</h2>
<p>Now we’ll evaluate a retirement pension, that receives a payment grade which is a lineal function between age 60 and the maximum possible age of retirement at 70, and goes from 50% to 100%. This is not a grading function in which benefit provided at early or late retirement has the same present value as the benefit payable at normal retirement (<span class="citation">(Winklevoss 1993)</span>, chapter 9). Instead, here the person is penalyzed for early retirement. The insured has an annual salary of 5000 at age <span class="math inline">\(x\)</span>. Also there is a seniority condition of 10 years. The other parameters are the same that the previous example.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">=</span> <span class="dv">50</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>y2 <span class="ot">=</span> <span class="dv">35</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>decrement2 <span class="ot">=</span> <span class="st">&quot;retirement&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>pay_grade <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">x =</span> x2<span class="sc">:</span><span class="dv">70</span>, <span class="at">gr =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">10</span>), <span class="fu">seq</span>(<span class="fl">0.5</span>, <span class="dv">1</span>, <span class="fl">0.05</span>)))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>snty_req <span class="ot">=</span> <span class="dv">20</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>s_x <span class="ot">=</span> <span class="dv">5000</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>Cost_Method2 <span class="ot">=</span> <span class="st">&quot;BPM_CD&quot;</span></span></code></pre></div>
<p>The calculation now focus on estimate the actuarial values at age <span class="math inline">\(x2\)</span>, for all the retirement scheme (all ages between <span class="math inline">\(x2\)</span> and 70).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>AL_xr <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">r =</span> <span class="dv">0</span>, <span class="at">AL =</span> <span class="dv">0</span>, <span class="at">NC =</span> <span class="dv">0</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> x2<span class="sc">:</span><span class="dv">70</span>) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ((r <span class="sc">-</span> y2) <span class="sc">&lt;</span> snty_req) </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        AL_xr[r <span class="sc">-</span> x2 <span class="sc">+</span> <span class="dv">1</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>] <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>) <span class="cf">else</span> {</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        AL_xr[r <span class="sc">-</span> x2 <span class="sc">+</span> <span class="dv">1</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>] <span class="ot">=</span> s_x <span class="sc">*</span> pay_grade[pay_grade<span class="sc">$</span>x <span class="sc">==</span> r, <span class="dv">2</span>] <span class="sc">*</span> <span class="fu">PensFund</span>(x2, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            y2, r, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement2, <span class="at">i =</span> <span class="fl">0.04</span>, </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">j =</span> <span class="fl">0.06</span>, <span class="at">delta =</span> <span class="fl">0.03</span>, <span class="at">avg =</span> <span class="dv">5</span>, <span class="at">acttablePaymPeriod =</span> soa08, <span class="at">CostMet =</span> Cost_Method2)[<span class="dv">1</span>, </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    AL_xr[r <span class="sc">-</span> x2 <span class="sc">+</span> <span class="dv">1</span>, <span class="dv">1</span>] <span class="ot">=</span> r</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The total liability at age x is 1.88917^{4} and is distributed between this retirement options, influenced by the progressive function of the early retirement <em>pay_grade</em>) and the individual’s expected behavior (probability of retirement).</p>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="third-example" class="section level2">
<h2>Third example</h2>
<p>Now let’s imagine that the same insured has the benefit of receive a 50% of his/her last salary at each age before retirement if he decide to leave the Company. The benefit is in concept of recognition of past contributions to the pension plan. This benefit can be estimated setting <span class="math inline">\(n=1\)</span> (no rent, a single payment) and <span class="math inline">\(avg=0\)</span> (only last salary). For example, for the risk of withdrawal at age 45:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>decrement3 <span class="ot">=</span> <span class="st">&quot;withdrawal&quot;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">=</span> <span class="dv">30</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>y3 <span class="ot">=</span> <span class="dv">20</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>r3 <span class="ot">=</span> <span class="dv">45</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>BPM_CP3 <span class="ot">=</span> s_x <span class="sc">*</span> <span class="fl">0.5</span> <span class="sc">*</span> <span class="fu">PensFund</span>(x3, y3, r3, <span class="at">acttableAccPeriod =</span> MultiDecrTable, <span class="at">decrement =</span> decrement3, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">i =</span> <span class="fl">0.04</span>, <span class="at">j =</span> <span class="fl">0.06</span>, <span class="at">delta =</span> <span class="fl">0.03</span>, <span class="at">avg =</span> <span class="dv">0</span>, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">acttablePaymPeriod =</span> soa08, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">CostMet =</span> <span class="st">&quot;BPM_CP&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="future-improvements" class="section level2">
<h2>Future improvements:</h2>
<p>The following improvements are planned:</p>
<ol style="list-style-type: decimal">
<li>Because a payment can’t be done before the contingency occurs, an assumption about occurrence and payment must be done. We will improve the function to consider payments at half of the year. This affects only the financial component, and little bit the final results.</li>
<li>Make the benefit rent payable for a designed survivor too, and with a portion of the titular benefit. This also allows to include death as a main benefit risk.</li>
</ol>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bowers1997actuarial" class="csl-entry">
Bowers, N. L., D. A. Jones, H. U. Gerber, C. J. Nesbitt, and J. C. Hickman. 1997. <em>Actuarial Mathematics, 2nd Edition</em>. Society of Actuaries.
</div>
<div id="ref-winklevoss1993pension" class="csl-entry">
Winklevoss, Howard E. 1993. <em>Pension Mathematics with Numerical Illustrations</em>. University of Pennsylvania Press.
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
